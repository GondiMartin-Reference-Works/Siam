package homework;

import javax.swing.ImageIcon;
import javax.swing.table.AbstractTableModel;



/**
 * A játékosok bábuinak adatait tartalmazza táblázat betöltéséhez.
 * */
public class PawnData extends AbstractTableModel{
	private static final long serialVersionUID = 1L;
	
	
	
	//----------ADATTAGOK----------
	Pawn[] player1;
	Pawn[] player2;
	private static final int max_pawns = 5;
	private static final ImageIcon p1_icon = new ImageIcon("elephant.jpg", "E");
	private static final ImageIcon p2_icon = new ImageIcon("rhino.jpg", "R");
	

	
	//---------METÓDUSOK----------
	
	
	/**
	 * Az osztály konstruktora. Feltölti a mezõket.
	 * Beállítja a mezõk szomszédjait.
	 * */
	public PawnData() {
		player1 = new Pawn[max_pawns];
		player2 = new Pawn[max_pawns];
		for(int i = 0; i<max_pawns; ++i) {
			player1[i] = new Pawn(p1_icon);
			player2[i] = new Pawn(p2_icon);
		}
	}
	
	
	public String getColumnName(int col) {
		switch(col) {
		case 0: return "Player1";
		case 1: return "Player2";
		default: return "Player3";
		}
	}
	
	
	@Override
	public int getRowCount() {
		return max_pawns;
	}

	
	@Override
	public int getColumnCount() {
		return 2;
	}
	
	
	public Class<? extends Object> getColumnClass(int column)
    {
        return getValueAt(0, column).getClass();
    }
	
	
	@Override
	public Object getValueAt(int rowIndex, int columnIndex) {
		Pawn pawn = new Pawn();
		//Ha az elsõ játékos bábui érdekesek...
		if(columnIndex == 0)
			pawn = player1[rowIndex];
		//Más különben a második játékos bábui az érdekesek...
		else
			pawn = player2[rowIndex];
		return pawn;
	}
	
	
	public void setValueAt(Object value, int row, int col) {
		//Ha az elsõ játékos bábui érdekesek...
		if(col == 0)
			player1[row] = (Pawn)value;
		//Más különben a második játékos bábui az érdekesek...
		else
			player2[row] = (Pawn)value;
		fireTableCellUpdated(row, col);
	}
	
	
	
	/**
	 * Visszaadja az elsõ null értéket a bábu táblából adott oszlopban
	 * @param col - Megadja, hogy melyik játékos bábui között keressük az üres helyet. 0 = player1; 1 = player2;
	 * @return Visszaadja hányadik sorban található az elsõ null elem.
	 * */
	public int firstNullValueAt(int col) {
		int row = -1;
		int i = 0;
		if(col == 0) {
			while(i<max_pawns && row == -1) {
				if(player1[i] == null)
					row = i;
				++i;
			}
		}else {
			while(i<max_pawns && row == -1) {
				if(player2[i] == null)
					row = i;
				++i;
			}
		}
		return row;
	}

}
